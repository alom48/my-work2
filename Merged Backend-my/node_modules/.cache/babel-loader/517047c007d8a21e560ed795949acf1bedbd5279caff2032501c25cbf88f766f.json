{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\Merged Backend-20240227T173116Z-001\\\\src\\\\user\\\\Productlist.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link, useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductList() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [cart, setCart] = useState([]);\n  const history = useHistory(); // Get the history object\n\n  useEffect(() => {\n    fetch('http://localhost:5000/get-image').then(res => res.json()).then(data => {\n      if (data.status === 'ok') {\n        setProducts(data.data);\n      } else {\n        console.error('Error fetching products:', data);\n      }\n    }).catch(error => console.error('Error fetching data:', error));\n  }, []);\n  useEffect(() => {\n    const storedCartItems = localStorage.getItem('cart');\n    if (storedCartItems) {\n      setCart(JSON.parse(storedCartItems));\n    }\n  }, []);\n  const handleCategoryChange = e => {\n    setSelectedCategory(e.target.value);\n  };\n  const handleAddToCart = async productId => {\n    try {\n      // Send a POST request to the server to add the product to the cart\n      const response = await axios.post(`http://localhost:5000/add-to-cart/${productId}`);\n\n      // Check if the request was successful\n      if (response.status === 200) {\n        // If successful, update the cart state in the frontend\n        const newProduct = response.data.product;\n        setCart([...cart, newProduct]);\n\n        // Update the cart items in local storage\n        localStorage.setItem('cart', JSON.stringify([...cart, newProduct]));\n\n        // Redirect to the cart page\n        history.push('/user/cart');\n      }\n    } catch (error) {\n      // Handle any errors\n      console.error('Error adding product to cart:', error);\n    }\n  };\n  const isInCart = productId => {\n    return cart.some(item => item._id === productId);\n  };\n  const filteredProducts = products.filter(product => selectedCategory === '' || product.category.toLowerCase() === selectedCategory.toLowerCase());\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Buy Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: handleCategoryChange,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"laptop\",\n        children: \"Laptop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"mouse\",\n        children: \"Mouse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"keyboard\",\n        children: \"Keyboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap'\n      },\n      children: filteredProducts.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '20%',\n          margin: '10px',\n          border: '1px solid #ccc',\n          padding: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: `http://localhost:5000/get-image/${p.image}`,\n          alt: p.title,\n          width: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: p.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Price: \", p.price, \"$\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }, this), isInCart(p._id) ? /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: true,\n          className: \"btn btn-secondary mr-2\",\n          children: \"In Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAddToCart(p._id),\n          className: \"btn btn-success mr-2\",\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/user/products/${p._id}/view`,\n          className: \"btn\",\n          children: \"View Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this)]\n      }, p._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n}\n_s(ProductList, \"HQmzK3W3CTNfOqJ9JzBqwtOsOyc=\", false, function () {\n  return [useHistory];\n});\n_c = ProductList;\n;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useHistory","jsxDEV","_jsxDEV","ProductList","_s","products","setProducts","selectedCategory","setSelectedCategory","cart","setCart","history","fetch","then","res","json","data","status","console","error","catch","storedCartItems","localStorage","getItem","JSON","parse","handleCategoryChange","e","target","value","handleAddToCart","productId","response","post","newProduct","product","setItem","stringify","push","isInCart","some","item","_id","filteredProducts","filter","category","toLowerCase","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","style","display","flexWrap","map","p","width","margin","border","padding","src","image","alt","title","price","disabled","className","onClick","to","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/Downloads/Merged Backend-20240227T173116Z-001/src/user/Productlist.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nfunction ProductList() {\r\n    const [products, setProducts] = useState([]);\r\n    const [selectedCategory, setSelectedCategory] = useState('');\r\n    const [cart, setCart] = useState([]);\r\n    const history = useHistory(); // Get the history object\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:5000/get-image')\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.status === 'ok') {\r\n                    setProducts(data.data);\r\n                } else {\r\n                    console.error('Error fetching products:', data);\r\n                }\r\n            })\r\n            .catch(error => console.error('Error fetching data:', error));\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const storedCartItems = localStorage.getItem('cart');\r\n        if (storedCartItems) {\r\n            setCart(JSON.parse(storedCartItems));\r\n        }\r\n    }, []);\r\n\r\n    const handleCategoryChange = (e) => {\r\n        setSelectedCategory(e.target.value);\r\n    }\r\n\r\n    const handleAddToCart = async (productId) => {\r\n        try {\r\n            // Send a POST request to the server to add the product to the cart\r\n            const response = await axios.post(`http://localhost:5000/add-to-cart/${productId}`);\r\n\r\n            // Check if the request was successful\r\n            if (response.status === 200) {\r\n                // If successful, update the cart state in the frontend\r\n                const newProduct = response.data.product;\r\n                setCart([...cart, newProduct]);\r\n\r\n                // Update the cart items in local storage\r\n                localStorage.setItem('cart', JSON.stringify([...cart, newProduct]));\r\n\r\n                // Redirect to the cart page\r\n                history.push('/user/cart');\r\n            }\r\n        } catch (error) {\r\n            // Handle any errors\r\n            console.error('Error adding product to cart:', error);\r\n        }\r\n    };\r\n\r\n    const isInCart = (productId) => {\r\n        return cart.some(item => item._id === productId);\r\n    };\r\n\r\n    const filteredProducts = products.filter(product =>\r\n        (selectedCategory === '' || product.category.toLowerCase() === selectedCategory.toLowerCase())\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <h1>Buy Product</h1>\r\n            <select onChange={handleCategoryChange}>\r\n                <option value=\"\">All</option>\r\n                <option value=\"laptop\">Laptop</option>\r\n                <option value=\"mouse\">Mouse</option>\r\n                <option value=\"keyboard\">Keyboard</option>\r\n            </select>\r\n\r\n            <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n                {filteredProducts.map(p => (\r\n                    <div key={p._id} style={{ width: '20%', margin: '10px', border: '1px solid #ccc', padding: '10px' }}>\r\n                        <img src={`http://localhost:5000/get-image/${p.image}`} alt={p.title} width=\"100%\" />\r\n                        <h3>{p.title}</h3>\r\n                        <p>Price: {p.price}$</p>\r\n                        {isInCart(p._id) ? (\r\n                            <button disabled className='btn btn-secondary mr-2'>\r\n                                In Cart\r\n                            </button>\r\n                        ) : (\r\n                            <button onClick={() => handleAddToCart(p._id)} className='btn btn-success mr-2'>\r\n                                Add to Cart\r\n                            </button>\r\n                        )}\r\n                        <Link to={`/user/products/${p._id}/view`} className='btn'>View Product</Link>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}